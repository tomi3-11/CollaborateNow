{% extends 'accounts/base.html' %}
{% load humanize %}

{% block title %}
Profile - CollaborateNow
{% endblock %}

{% block style %}
<style>
body {
    background: #f0f2f5;
    font-family: "Inter", sans-serif;
}

/* Profile container */
.profile-container {
    max-width: 1000px;
    margin: 2rem auto;
    padding: 0 1rem;
}

/* Banner */
.profile-banner {
    width: 100%;
    height: 180px;
    border-radius: 12px 12px 0 0;
    background: linear-gradient(135deg, #6a5acd, #4b7bec);
    position: relative;
    /* overflow: hidden; */
}

/* Avatar */
.profile-avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 4px solid #fff;
    background-color: #ddd;
    background-size: cover;
    background-position: center;
    position: absolute;
    bottom: -60px;
    left: 2rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

/* Profile card */
.profile-card {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    padding: 2rem;
    margin-top: 30px; /* space for avatar overlap */
}

/* Header info */
.profile-header {
    display: flex;
    align-items: flex-start;
    gap: 1.5rem;
    flex-wrap: wrap;
}

.profile-header-info {
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.profile-header-info h2 {
    margin: 0;
    font-size: 1.8rem;
    font-weight: 700;
}

.profile-header-info p {
    margin: 0.2rem 0 0 0;
    color: #555;
}

/* Profile details grid */
.profile-details {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem 2rem;
    margin-top: 1.5rem;
}

.profile-details p {
    margin: 0;
    font-size: 0.95rem;
}

.profile-details a {
    color: #4b7bec;
    text-decoration: none;
    word-break: break-word;
}

.profile-details a:hover {
    text-decoration: underline;
}

/* Projects/Portfolio */
.profile-projects {
    background: #f9f9fb;
    border-radius: 12px;
    padding: 1.5rem;
    margin-top: 2rem;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

.profile-projects h3 {
    font-weight: 700;
    margin-bottom: 1rem;
}

.profile-projects ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.profile-projects li {
    background: #fff;
    padding: 0.6rem 1rem;
    border-radius: 8px;
    margin-bottom: 0.5rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

/* Edit button */
.edit-profile-btn {
    display: inline-block;
    margin-top: 1.5rem;
    padding: 0.6rem 1.2rem;
    background: linear-gradient(135deg, #4b7bec, #6a5acd);
    color: #fff;
    font-weight: 600;
    border: none;
    border-radius: 8px;
    text-decoration: none;
    transition: all 0.3s ease;
}

.edit-profile-btn:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 6px 12px rgba(0,0,0,0.12);
}

/* Responsive */
@media (max-width: 768px) {
    .profile-avatar {
        left: 50%;
        transform: translateX(-50%);
        bottom: -60px;
    }

    .profile-header {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .profile-details {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="profile-container">

    <!-- Banner -->
    <div class="profile-banner">
        <div class="profile-avatar"
             {% if profile.avatar %}
                 style="background-image: url('{{ profile.avatar.url }}');"
             {% else %}
                 style="background-color: #3c3939;"
             {% endif %}
        ></div>
    </div>

    <!-- Main Profile Card -->
    <div class="profile-card">
        <div class="profile-header">
            <div class="profile-header-info">
                <h2>{{ user.username }}</h2>
                {% if profile.bio %}<p>{{ profile.bio }}</p>{% endif %}
            </div>
        </div>

        <!-- Profile Details -->
        <div class="profile-details">
            <p><strong>Email:</strong> {{ user.email }}</p>
            {% if user.first_name %}<p><strong>First Name:</strong> {{ user.first_name }}</p>{% endif %}
            {% if user.last_name %}<p><strong>Last Name:</strong> {{ user.last_name }}</p>{% endif %}
            <p><strong>Account Created:</strong> {{ user.date_joined|date:"F j, Y" }}</p>
            {% if profile.skills %}<p><strong>Skills:</strong> {{ profile.skills }}</p>{% endif %}
            {% if profile.experience_level %}<p><strong>Experience Level:</strong> {{ profile.get_experience_level_display }}</p>{% endif %}
            {% if profile.portfolio_url %}<p><strong>Portfolio:</strong> <a href="{{ profile.portfolio_url }}" target="_blank">{{ profile.portfolio_url }}</a></p>{% endif %}
        </div>

        <!-- Edit Button -->
        <a href="{% url 'accounts:edit_profile' %}" class="edit-profile-btn">Edit Profile</a>

        <!-- Projects -->
        {% if profile.projects.exists %}
        <div class="profile-projects">
            <h3>Projects & Portfolio</h3>
            <ul>
                {% for project in profile.projects.all %}
                    <li><strong>{{ project.name }}</strong> - <a href="{{ project.url }}" target="_blank">{{ project.url }}</a></li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
